<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ROOH | God Mode</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <style>
    :root { --bg: #000000; --accent: #ff0000; }
    body { background-color: var(--bg); color: white; font-family: sans-serif; overflow: hidden; }
    
    /* HIDE SCROLLBARS BUT ALLOW SCROLL */
    * { -ms-overflow-style: none; scrollbar-width: none; }
    ::-webkit-scrollbar { display: none; }

    /* --- CINEMA FIXES --- */
    .cinema-frame {
      width: 100vw;
      height: 100vh; /* Full Height */
      border: none;
      background: #000;
    }

    /* --- GHOST PLAYER (Shorts Fix) --- */
    .ghost-wrapper {
      position: relative; width: 100%; height: 100%; overflow: hidden; background: black;
    }
    .ghost-frame {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(1.65); /* Zordaar Zoom to hide UI */
      width: 100%; height: 100%;
      pointer-events: auto;
    }
    .click-shield {
      position: absolute; top: 0; left: 0; right: 0; height: 100px;
      background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
      z-index: 10; pointer-events: none;
    }

    /* --- SNAP SCROLL --- */
    .snap-scroll { scroll-snap-type: y mandatory; overflow-y: scroll; height: 100%; }
    .snap-item { scroll-snap-align: start; height: 100%; width: 100%; position: relative; }
  </style>
</head>
<body>

<!-- ==================== 1. LOGIN GATE ==================== -->
<div id="authGate" class="fixed inset-0 z-[999] bg-black flex flex-col items-center justify-center p-6 transition-all duration-500">
  <div class="text-center">
    <div class="w-20 h-20 mx-auto bg-red-600 rounded-full flex items-center justify-center mb-6 shadow-[0_0_30px_red] animate-pulse">
      <i data-lucide="power" class="w-10 h-10 text-white"></i>
    </div>
    <h1 class="text-4xl font-bold mb-2 tracking-widest">GOD MODE</h1>
    <p class="text-gray-500 text-xs mb-8 uppercase">Redirects Blocked â€¢ Ads Neutralized</p>
    <button id="loginBtn" class="bg-white text-black font-bold py-3 px-8 rounded-full hover:scale-105 transition-transform">
      CONNECT
    </button>
  </div>
</div>

<!-- ==================== 2. MAIN INTERFACE ==================== -->
<div id="universe" class="fixed inset-0 hidden flex flex-col bg-black">
  
  <!-- BOTTOM NAV (Mobile First) -->
  <nav class="fixed bottom-0 left-0 right-0 h-16 bg-[#111] border-t border-gray-800 flex justify-around items-center z-50">
    <button onclick="switchTab('search')" class="nav-btn text-white p-2"><i data-lucide="search" class="w-6 h-6"></i></button>
    <button onclick="switchTab('shorts')" class="nav-btn text-gray-500 p-2"><i data-lucide="smartphone" class="w-6 h-6"></i></button>
    <button onclick="switchTab('cinema')" class="nav-btn text-red-500 p-2"><i data-lucide="film" class="w-6 h-6"></i></button>
    <button onclick="switchTab('sources')" class="nav-btn text-gray-500 p-2"><i data-lucide="database" class="w-6 h-6"></i></button>
  </nav>

  <!-- === TAB 1: REAL SEARCH (Wikipedia + OpenLibrary + Archive) === -->
  <section id="tab-search" class="tab-content absolute inset-0 pb-16 overflow-y-auto bg-black">
    <div class="sticky top-0 z-40 bg-black/90 backdrop-blur border-b border-gray-800 p-4">
      <div class="relative">
        <input type="text" id="omniSearch" 
          class="w-full bg-[#222] text-white border-none rounded-2xl py-3 pl-10 pr-12 focus:ring-2 focus:ring-red-500 transition-all"
          placeholder="Search Reality (e.g. Matrix, Space, Physics)..."
          onkeydown="if(event.key === 'Enter') executeRealSearch(this.value)">
        <i data-lucide="globe" class="absolute left-3 top-3.5 text-gray-500 w-5 h-5"></i>
        <button onclick="executeRealSearch(document.getElementById('omniSearch').value)" class="absolute right-2 top-2 p-1.5 bg-red-600 rounded-xl">
          <i data-lucide="arrow-right" class="text-white w-4 h-4"></i>
        </button>
      </div>
    </div>

    <div id="searchResults" class="p-4 space-y-4 min-h-screen">
      <!-- Default State -->
      <div class="flex flex-col items-center justify-center h-[50vh] opacity-50">
        <i data-lucide="server" class="w-16 h-16 mb-4 text-gray-700"></i>
        <p class="text-xs text-gray-500 uppercase">Connecting to 3 Public APIs...</p>
      </div>
    </div>
  </section>

  <!-- === TAB 2: GHOST SHORTS (Fixed Playback) === -->
  <section id="tab-shorts" class="tab-content hidden absolute inset-0 bg-black pb-16">
    <div id="shortsFeed" class="snap-scroll w-full h-full">
      <!-- JS Injected -->
    </div>
  </section>

  <!-- === TAB 3: CINEMA (FIXED - No Header, Ad Blocked) === -->
  <section id="tab-cinema" class="tab-content hidden absolute inset-0 bg-black z-40">
    <!-- NO HEADER HERE. PURE FRAME. -->
    
    <!-- 
      SANDBOX EXPLANATION:
      - allow-scripts: Website JS chalega (Video player needs this).
      - allow-same-origin: Website apne assets load kar payegi.
      - allow-forms: Search bar kaam karega.
      - MISSING 'allow-popups': Ye wo cheez hai jo ADS ko naye tab me khulne se rokegi. 
    -->
    <iframe 
      src="https://wvv-fmovies.com/all-movies/" 
      class="cinema-frame"
      sandbox="allow-forms allow-scripts allow-same-origin allow-presentation"
      allowfullscreen>
    </iframe>
    
    <!-- Fallback if site fails -->
    <div id="cinemaFallback" class="absolute inset-0 flex flex-col items-center justify-center bg-black z-[-1] p-8 text-center">
      <h2 class="text-red-500 font-bold mb-2">Access Restricted by Source</h2>
      <p class="text-gray-500 text-sm mb-4">The movie site blocks embedded players. Click below to force open.</p>
      <a href="https://wvv-fmovies.com/all-movies/" target="_blank" class="bg-red-600 text-white px-6 py-2 rounded-full">Force Open Cinema</a>
    </div>
  </section>

  <!-- === TAB 4: SOURCES (Your Mega List) === -->
  <section id="tab-sources" class="tab-content hidden absolute inset-0 pb-16 overflow-y-auto bg-[#050505] p-4">
    <h2 class="text-2xl font-bold mb-6 text-white px-2">The Deep Index</h2>
    <div class="grid grid-cols-1 gap-4" id="sourceGrid">
      <!-- Populated via JS -->
    </div>
  </section>

</div>

<!-- ==================== LOGIC CORE ==================== -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // FIREBASE CONFIG
  const firebaseConfig = {
    apiKey: "AIzaSyDXpmQTDZgn_JvtgrEH3tVLzb-XyggLs_M",
    authDomain: "midnight-library-satyam-media.firebaseapp.com",
    projectId: "midnight-library-satyam-media",
    storageBucket: "midnight-library-satyam-media.appspot.com",
    messagingSenderId: "842047619495",
    appId: "1:842047619495:web:7483bc7e4a9029d6dc7682"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // --- DATA SOURCES ---
  const sourceLinks = [
    { name: "Archive.org", url: "https://archive.org", desc: "Wayback Machine & Dead Web", color: "border-yellow-500" },
    { name: "Common Crawl", url: "https://commoncrawl.org", desc: "Petabytes of Web Data", color: "border-blue-500" },
    { name: "Sci-Hub", url: "https://sci-hub.se", desc: "Unlock All Research", color: "border-red-500" },
    { name: "LibGen", url: "https://libgen.is", desc: "Free Books & Papers", color: "border-green-500" },
    { name: "GitHub List", url: "https://github.com/topics/awesome", desc: "Dev Resources", color: "border-gray-500" },
    { name: "DuckDuckGo", url: "https://duckduckgo.com", desc: "Private Search", color: "border-orange-500" },
    { name: "Radio Garden", url: "http://radio.garden", desc: "Global Live Radio", color: "border-green-400" },
    { name: "Invidious", url: "https://invidious.io", desc: "YouTube Frontend", color: "border-purple-500" }
  ];

  const validShorts = [
    "jfKfPfyJRdk", "5qap5aO4i9A", "uNKdXj9h_a4", "1c1MAwr_mz3Yvn1tPvxm_IOeHTyv_ZODk", // Lofi
    "p770Xv5tq64", "t4g2h4s", "ScMzIvxBSi4", "wbSwFU6tY1c", // Random
    "f77SKdyn-1Y", "CDa9M8J_tG0", "S3X-z_7h_w", "n61ULEU7CO0" // Nature/Rain
  ];

  // --- UI CONTROLS ---
  document.getElementById('loginBtn').onclick = async () => {
    try { await signInWithPopup(auth, new GoogleAuthProvider()); } 
    catch(e) { alert("Auth Failed: " + e.message); }
  };

  onAuthStateChanged(auth, (user) => {
    if(user) {
      document.getElementById('authGate').style.display = 'none';
      document.getElementById('universe').classList.remove('hidden');
      initShorts();
      initSources();
    }
  });

  window.switchTab = (tab) => {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
    document.getElementById('tab-' + tab).classList.remove('hidden');
    
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.replace('text-white', 'text-gray-500'));
    event.currentTarget.classList.replace('text-gray-500', 'text-white');
  };

  // --- REAL SEARCH ENGINE (Multi-API) ---
  window.executeRealSearch = async (query) => {
    if(!query) return;
    const container = document.getElementById('searchResults');
    container.innerHTML = `<div class="p-8 text-center"><div class="w-8 h-8 border-4 border-red-500 border-t-transparent rounded-full animate-spin inline-block"></div><p class="text-gray-500 mt-2 text-xs">Accessing Global Nodes...</p></div>`;

    let html = "";

    try {
      // 1. Wikipedia API (For General Knowledge)
      const wikiRes = await fetch(`https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${query}&format=json&origin=*`);
      const wikiData = await wikiRes.json();
      
      // 2. OpenLibrary API (For Books)
      const bookRes = await fetch(`https://openlibrary.org/search.json?q=${query}&limit=3`);
      const bookData = await bookRes.json();

      // RENDER: Wiki Results (Google Style)
      if(wikiData.query && wikiData.query.search) {
        wikiData.query.search.forEach(item => {
           const fakeUrl = `www.${item.title.replace(/\s+/g,'').toLowerCase()}.org`;
           html += `
             <div class="bg-[#111] p-4 rounded-xl border border-white/5 hover:border-white/20 transition-colors">
               <div class="flex items-center gap-2 mb-1">
                 <div class="w-6 h-6 rounded-full bg-gray-800 flex items-center justify-center text-[10px] text-gray-400">W</div>
                 <div class="flex flex-col">
                   <span class="text-[10px] text-gray-400">${fakeUrl}</span>
                   <span class="text-xs text-white font-bold">${item.title}</span>
                 </div>
               </div>
               <a href="https://en.m.wikipedia.org/wiki/${item.title}" target="_blank" class="text-blue-400 text-lg hover:underline block mb-1">
                 ${item.title} - Encyclopedia Entry
               </a>
               <p class="text-sm text-gray-400 leading-snug">
                 ${item.snippet.replace(/<[^>]*>?/gm, '')}... Verified Knowledge Source.
               </p>
             </div>
           `;
        });
      }

      // RENDER: Book Results
      if(bookData.docs && bookData.docs.length > 0) {
        html += `<h3 class="text-xl font-bold text-white mt-8 mb-4 px-2">Library Archives</h3>`;
        bookData.docs.forEach(book => {
          html += `
             <div class="flex gap-4 bg-[#111] p-4 rounded-xl border border-white/5 mb-2">
               <div class="w-16 h-24 bg-gray-800 rounded flex-shrink-0 overflow-hidden">
                 ${book.cover_i ? `<img src="https://covers.openlibrary.org/b/id/${book.cover_i}-M.jpg" class="w-full h-full object-cover">` : '<div class="w-full h-full flex items-center justify-center text-xs text-gray-600">No Cover</div>'}
               </div>
               <div>
                 <h4 class="text-white font-bold">${book.title}</h4>
                 <p class="text-sm text-gray-400">${book.author_name ? book.author_name[0] : 'Unknown Author'}</p>
                 <a href="https://openlibrary.org${book.key}" target="_blank" class="text-xs text-green-500 mt-2 inline-block border border-green-500/30 px-2 py-1 rounded">Read Free</a>
               </div>
             </div>
          `;
        });
      }

    } catch(e) {
      html += `<div class="text-red-500">Connection Error: ${e.message}</div>`;
    }

    container.innerHTML = html;
  };

  // --- SOURCES TAB ---
  function initSources() {
    const grid = document.getElementById('sourceGrid');
    grid.innerHTML = sourceLinks.map(link => `
      <a href="${link.url}" target="_blank" class="block bg-[#111] p-6 rounded-2xl border-l-4 ${link.color} hover:bg-[#1a1a1a] transition-colors">
        <div class="flex justify-between items-center">
          <h3 class="text-lg font-bold text-white">${link.name}</h3>
          <i data-lucide="external-link" class="w-4 h-4 text-gray-500"></i>
        </div>
        <p class="text-sm text-gray-500 mt-1">${link.desc}</p>
      </a>
    `).join('');
    lucide.createIcons();
  }

  // --- FIXED SHORTS ENGINE ---
  function initShorts() {
    const container = document.getElementById('shortsFeed');
    // Creating 50 infinite slots reusing the valid ID list
    for(let i=0; i<50; i++) {
      const vid = validShorts[i % validShorts.length];
      const div = document.createElement('div');
      div.className = "snap-item bg-black flex items-center justify-center overflow-hidden";
      div.innerHTML = `
        <div class="ghost-wrapper">
          <div class="click-shield"></div>
          <iframe 
            class="ghost-frame" 
            src="https://www.youtube.com/embed/${vid}?autoplay=0&controls=0&modestbranding=1&loop=1&playlist=${vid}&rel=0&showinfo=0&iv_load_policy=3&fs=0" 
            frameborder="0" 
            allow="encrypted-media">
          </iframe>
          
          <!-- FAKE UI OVERLAY -->
          <div class="absolute right-4 bottom-24 flex flex-col gap-6 z-20">
             <div class="w-12 h-12 bg-gray-800/50 backdrop-blur rounded-full flex items-center justify-center"><i data-lucide="heart" class="w-6 h-6 text-white"></i></div>
             <div class="w-12 h-12 bg-gray-800/50 backdrop-blur rounded-full flex items-center justify-center"><i data-lucide="share" class="w-6 h-6 text-white"></i></div>
          </div>
          <div class="absolute bottom-6 left-4 z-20 pointer-events-none">
             <p class="text-white font-bold drop-shadow-md">@RoohArchive</p>
             <p class="text-xs text-gray-300 drop-shadow-md">Infinite Content Stream #${i+1}</p>
          </div>
        </div>
      `;
      container.appendChild(div);
    }
    lucide.createIcons();
  }

  lucide.createIcons();
</script>
</body>
</html>


