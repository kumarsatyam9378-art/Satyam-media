<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ROOH | The Absolute Universe</title>
  
  <!-- CSS Framework & Icons -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <!-- Premium Typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Satoshi:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    /* UNIVERSAL RESETS & SCROLLBAR HIDING */
    :root {
      --gold: #D4AF37;
      --void: #050505;
      --glass: rgba(255, 255, 255, 0.03);
      --glass-border: rgba(255, 255, 255, 0.08);
    }
    
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { font-family: 'Satoshi', sans-serif; background-color: var(--void); color: white; overflow: hidden; }
    h1, h2, h3, .serif { font-family: 'Cinzel', serif; }
    
    /* Custom Scrollbar (Invisible but functional) */
    ::-webkit-scrollbar { width: 0px; background: transparent; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* ANIMATIONS */
    @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
    @keyframes aurora { 
      0% { background-position: 0% 50%; } 
      50% { background-position: 100% 50%; } 
      100% { background-position: 0% 50%; } 
    }
    @keyframes scanline {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }

    /* UTILITIES */
    .glass-panel {
      background: var(--glass);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border: 1px solid var(--glass-border);
    }
    
    .aurora-bg {
      background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #000000);
      background-size: 400% 400%;
      animation: aurora 15s ease infinite;
    }

    .neon-text { text-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
    .gold-text { background: linear-gradient(to right, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C); -webkit-background-clip: text; color: transparent; }

    /* TIKTOK STYLE SCROLL */
    .snap-container { scroll-snap-type: y mandatory; overflow-y: scroll; height: 100vh; }
    .snap-child { scroll-snap-align: start; height: 100vh; width: 100%; position: relative; }

    /* LOADER */
    .loader-ring { display: inline-block; width: 80px; height: 80px; }
    .loader-ring:after { content: " "; display: block; width: 64px; height: 64px; margin: 8px; border-radius: 50%; border: 6px solid #fff; border-color: #fff transparent #fff transparent; animation: loader-ring 1.2s linear infinite; }
    @keyframes loader-ring { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>
</head>
<body class="aurora-bg h-screen w-screen overflow-hidden">

<!-- ==================== AUTHENTICATION GATE ==================== -->
<div id="authGate" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center p-6 transition-all duration-1000">
  <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1534447677768-be436bb09401?q=80&w=2994&auto=format&fit=crop')] bg-cover bg-center opacity-20"></div>
  <div class="relative glass-panel p-12 rounded-3xl max-w-lg w-full text-center border-t border-white/10 shadow-2xl">
    <div class="w-20 h-20 mx-auto mb-8 rounded-full border border-white/20 flex items-center justify-center animate-[float_6s_ease-in-out_infinite]">
      <i data-lucide="infinity" class="w-10 h-10 text-white"></i>
    </div>
    <h1 class="text-5xl md:text-7xl font-bold mb-4 tracking-tighter text-white">ROOH</h1>
    <p class="text-gray-400 text-sm tracking-[0.2em] uppercase mb-12">The Infinite Archive</p>
    
    <button id="loginBtn" class="group relative w-full overflow-hidden rounded-xl bg-white/5 px-8 py-4 transition-all hover:bg-white/10 border border-white/10">
      <div class="absolute inset-0 translate-x-[-100%] bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-1000 group-hover:translate-x-[100%]"></div>
      <span class="relative flex items-center justify-center gap-3 font-serif text-lg tracking-wider">
        <i data-lucide="key" class="w-4 h-4"></i> ACCESS TERMINAL
      </span>
    </button>
    
    <div class="mt-8 flex justify-center gap-4 text-[10px] text-gray-500 uppercase tracking-widest">
      <span>Encrypted</span> • <span>Private</span> • <span>Ethereal</span>
    </div>
  </div>
</div>

<!-- ==================== MAIN UNIVERSE ==================== -->
<div id="universe" class="hidden relative h-full w-full opacity-0 transition-opacity duration-1000">
  
  <!-- BACKGROUND AMBIENCE -->
  <div class="absolute inset-0 bg-black/80 z-0 pointer-events-none"></div>

  <!-- NAVIGATION (SIDEBAR DESKTOP / BOTTOM MOBILE) -->
  <nav class="fixed z-50 glass-panel transition-all duration-300
              bottom-0 left-0 w-full h-20 border-t border-white/10 
              md:left-0 md:top-0 md:h-full md:w-24 md:border-r md:border-t-0 md:flex-col md:justify-center">
    
    <div class="flex md:flex-col items-center justify-around h-full w-full md:h-auto md:gap-10 p-2">
      <!-- Nav Items -->
      <button onclick="warpTo('chronicles')" class="nav-btn group flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition-all active-nav" data-target="chronicles">
        <i data-lucide="library" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
        <span class="text-[9px] uppercase tracking-widest hidden md:block">Library</span>
      </button>

      <button onclick="warpTo('visions')" class="nav-btn group flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition-all" data-target="visions">
        <i data-lucide="eye" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
        <span class="text-[9px] uppercase tracking-widest hidden md:block">Gallery</span>
      </button>

      <div class="hidden md:block w-px h-8 bg-white/10"></div>

      <button onclick="warpTo('cinema')" class="nav-btn group flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition-all text-purple-400" data-target="cinema">
        <div class="relative">
          <i data-lucide="play-circle" class="w-8 h-8 group-hover:scale-110 transition-transform"></i>
          <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
        </div>
        <span class="text-[9px] uppercase tracking-widest hidden md:block">Stream</span>
      </button>

      <div class="hidden md:block w-px h-8 bg-white/10"></div>

      <button onclick="warpTo('symphony')" class="nav-btn group flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition-all" data-target="symphony">
        <i data-lucide="music-2" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
        <span class="text-[9px] uppercase tracking-widest hidden md:block">Audio</span>
      </button>
      
      <button onclick="signOutUser()" class="nav-btn group flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition-all mt-auto md:mt-20">
        <i data-lucide="log-out" class="w-6 h-6"></i>
      </button>
    </div>
  </nav>

  <!-- CONTENT CONTAINER -->
  <main class="relative z-10 h-full w-full md:pl-24 overflow-hidden">
    
    <!-- HEADER -->
    <header class="absolute top-0 left-0 right-0 p-6 md:pl-32 flex justify-between items-end z-40 bg-gradient-to-b from-black via-black/80 to-transparent pointer-events-none">
      <div>
        <h2 id="sectionTitle" class="text-3xl md:text-5xl font-bold text-white tracking-tighter neon-text">CHRONICLES</h2>
        <p class="text-xs text-gray-400 tracking-[0.3em] uppercase mt-2">Curated Premium Selection</p>
      </div>
      <div class="flex items-center gap-4 pointer-events-auto">
        <div id="aiStatus" class="glass-panel px-3 py-1 rounded-full text-[10px] text-green-400 flex items-center gap-2">
          <div class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></div>
          AI ONLINE
        </div>
        <div class="w-10 h-10 rounded-full bg-white/10 overflow-hidden border border-white/20">
          <img id="userAvatar" src="" class="w-full h-full object-cover opacity-80">
        </div>
      </div>
    </header>

    <!-- SECTION: CHRONICLES (BOOKS) -->
    <section id="chronicles" class="view-section absolute inset-0 pt-32 px-4 md:px-12 pb-24 overflow-y-auto custom-scroll">
      <div class="max-w-7xl mx-auto">
        <!-- AI Recommendation Banner -->
        <div class="glass-panel p-6 rounded-2xl mb-12 flex items-center justify-between border-l-4 border-purple-500">
          <div>
            <h3 class="text-lg font-bold mb-1 font-serif text-purple-200">Architect's Pick</h3>
            <p class="text-sm text-gray-400">Based on your neural profile, we selected "The Philosophy of Void"</p>
          </div>
          <button class="bg-white/10 hover:bg-white/20 px-6 py-2 rounded-lg text-xs uppercase tracking-widest transition-colors">Read Now</button>
        </div>

        <div id="bookGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
          <!-- Books injected via JS -->
        </div>
      </div>
    </section>

    <!-- SECTION: VISIONS (IMAGES) -->
    <section id="visions" class="view-section hidden absolute inset-0 pt-32 px-4 md:px-8 pb-24 overflow-y-auto custom-scroll">
      <div id="visionGrid" class="columns-2 md:columns-4 gap-4 space-y-4">
        <!-- Images injected via JS -->
      </div>
      <div class="mt-8 text-center">
        <button onclick="loadMoreVisions()" class="glass-panel px-8 py-3 rounded-full text-xs uppercase tracking-widest hover:bg-white/10 transition-all">Expand Universe</button>
      </div>
    </section>

    <!-- SECTION: CINEMA (REELS) -->
    <section id="cinema" class="view-section hidden absolute inset-0 bg-black">
      <div id="reelContainer" class="snap-container no-scrollbar">
        <!-- Reels injected via JS -->
      </div>
    </section>

    <!-- SECTION: SYMPHONY (MUSIC) -->
    <section id="symphony" class="view-section hidden absolute inset-0 pt-32 px-4 md:px-12 pb-24 overflow-y-auto custom-scroll bg-[url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?q=80&w=2070')] bg-cover bg-fixed">
      <div class="absolute inset-0 bg-black/80 backdrop-blur-md"></div>
      <div class="relative max-w-5xl mx-auto z-10">
        <h3 class="text-2xl font-serif mb-8 text-center text-gray-300">Auditory Hallucinations</h3>
        
        <div id="musicGrid" class="space-y-4">
          <!-- Music Tracks injected via JS -->
        </div>
      </div>
    </section>

  </main>
</div>

<!-- ==================== UNIVERSAL MODAL (THE VOID) ==================== -->
<div id="voidModal" class="fixed inset-0 z-[200] bg-black/95 backdrop-blur-xl hidden flex flex-col transition-opacity duration-300 opacity-0">
  
  <!-- Modal Header -->
  <div class="flex items-center justify-between p-6 border-b border-white/10">
    <div class="flex items-center gap-3">
      <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
      <span class="text-xs font-mono text-gray-400 uppercase tracking-widest">Secure Connection</span>
    </div>
    <button onclick="closeVoid()" class="w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition-colors">
      <i data-lucide="x" class="w-6 h-6 text-white"></i>
    </button>
  </div>

  <!-- Content Area -->
  <div class="flex-1 relative overflow-hidden flex items-center justify-center bg-black">
    <div id="voidLoader" class="absolute inset-0 flex items-center justify-center z-10 bg-black">
      <div class="loader-ring"></div>
      <p class="absolute mt-24 text-[10px] uppercase tracking-[0.3em] text-gray-500 animate-pulse">Decryption in progress...</p>
    </div>
    
    <iframe id="voidFrame" class="w-full h-full border-none opacity-0 transition-opacity duration-500" allow="autoplay; fullscreen" sandbox="allow-scripts allow-same-origin allow-presentation"></iframe>
    <img id="voidImage" class="max-w-full max-h-full object-contain hidden" />
  </div>

  <!-- AI Analysis Bar -->
  <div class="h-16 border-t border-white/10 bg-black/50 backdrop-blur-md flex items-center px-6 gap-4">
    <i data-lucide="cpu" class="w-5 h-5 text-purple-500"></i>
    <p id="aiCaption" class="text-sm font-serif italic text-gray-300 typing-effect">Initializing neural link...</p>
  </div>
</div>

<!-- ==================== SCRIPT ENGINE ==================== -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { 
    getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut, 
    setPersistence, browserLocalPersistence 
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // --- CONFIGURATION ---
  const firebaseConfig = {
    apiKey: "AIzaSyDXpmQTDZgn_JvtgrEH3tVLzb-XyggLs_M",
    authDomain: "midnight-library-satyam-media.firebaseapp.com",
    projectId: "midnight-library-satyam-media",
    storageBucket: "midnight-library-satyam-media.appspot.com",
    messagingSenderId: "842047619495",
    appId: "1:842047619495:web:7483bc7e4a9029d6dc7682"
  };

  // --- INIT FIREBASE ---
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider();
  setPersistence(auth, browserLocalPersistence);

  // --- STATE ---
  let currentUser = null;
  const db = {
    books: [
      { title: "The Great Gatsby", author: "F. Scott Fitzgerald", cover: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&q=80&w=800", link: "https://books.google.com/books?id=iXg5AAAAIAAJ&printsec=frontcover&output=embed" },
      { title: "Metamorphosis", author: "Franz Kafka", cover: "https://images.unsplash.com/photo-1535905557558-afc4877a26fc?auto=format&fit=crop&q=80&w=800", link: "https://archive.org/embed/metamorphosis00kafk_0" },
      { title: "1984", author: "George Orwell", cover: "https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&q=80&w=800", link: "https://archive.org/embed/1984_202105" },
      { title: "Art of War", author: "Sun Tzu", cover: "https://images.unsplash.com/photo-1506880018603-83d5b814b5a6?auto=format&fit=crop&q=80&w=800", link: "https://archive.org/embed/artofwar00sunt_1" },
      { title: "Silent Echoes", author: "Unknown", cover: "https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=crop&q=80&w=800", link: "https://drive.google.com/file/d/1HlXQ_j4psFkwMPKE8z-KiFOGsX35lqU1/preview" },
      { title: "Broken Stars", author: "Cosmos", cover: "https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?auto=format&fit=crop&q=80&w=800", link: "https://drive.google.com/file/d/1nfpezHinp8dLec13IF_pyKSH9eG6HAVT/preview" },
      { title: "Beyond Good", author: "Nietzsche", cover: "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?auto=format&fit=crop&q=80&w=800", link: "https://archive.org/embed/beyondgoodevil00niet_0" },
      { title: "The Prophet", author: "Kahlil Gibran", cover: "https://images.unsplash.com/photo-1543002588-bfa74002ed7e?auto=format&fit=crop&q=80&w=800", link: "https://archive.org/embed/prophet00gibr_0" }
    ],
    // High Quality Unsplash IDs for "Unlimited" feel
    visuals: [
      "photo-1506744038136-46273834b3fb", "photo-1470770841072-f978cf4d019e", "photo-1433086966358-54859d0ed716",
      "photo-1472214103451-9374bd1c798e", "photo-1501854140884-074bf6b243e7", "photo-1504608524841-42fe6f032b4b",
      "photo-1519681393798-2f7723790dd7", "photo-1534447677768-be436bb09401", "photo-1470252649378-9c29740c9fa8",
      "photo-1516483638261-f4dbaf036963", "photo-1523712999610-f77fbcfc3843", "photo-1500462918059-b1a0cb512f1d",
      "photo-1426604966848-d3ad92f58aa9", "photo-1518173946687-a4c8892bbd9f", "photo-1451187580459-43490279c0fa"
    ],
    // Aesthetic YouTube Videos (Masked)
    videos: [
      { id: "1c1MAwr_mz3Yvn1tPvxm_IOeHTyv_ZODk", type: "drive" }, // Drive example
      { id: "jfKfPfyJRdk", type: "youtube" }, // Lofi
      { id: "5qap5aO4i9A", type: "youtube" }, // Lofi
      { id: "n61ULEU7CO0", type: "youtube" }, // Rain
      { id: "TURbeWK2wwg", type: "youtube" }, // Cyberpunk
      { id: "wbSwFU6tY1c", type: "youtube" }  // Space
    ],
    music: [
      { title: "Nocturne in C# Minor", artist: "Chopin", id: "9E6b3swbnWg" },
      { title: "Experience", artist: "Ludovico Einaudi", id: "_VONMkylv_i" },
      { title: "Cornfield Chase", artist: "Hans Zimmer", id: "1V_xRb0t9-W" },
      { title: "Moonlight Sonata", artist: "Beethoven", id: "4Tr0otuiQuU" },
      { title: "On The Nature Of Daylight", artist: "Max Richter", id: "rVN1B-tUpgs" },
      { title: "Gymnopedie No.1", artist: "Erik Satie", id: "S-Xm7s9eGxU" }
    ],
    // AI Captions Dictionary
    captions: [
      "Analyzing composition... Melancholic undertones detected.",
      "Visual harmony at 98%. Extracting poetic context.",
      "Subject displays traits of classical romanticism.",
      "Detected: Solitude, Peace, and Infinite Void.",
      "Calculating aesthetic value... Result: Masterpiece.",
      "Scanning pixels... This memory is pristine.",
      "Neural Link established. Immersion protocols active."
    ]
  };

  // --- AUTH HANDLERS ---
  const loginBtn = document.getElementById('loginBtn');
  const authGate = document.getElementById('authGate');
  const universe = document.getElementById('universe');

  loginBtn.onclick = async () => {
    try {
      await signInWithPopup(auth, provider);
    } catch (error) {
      console.error(error);
      alert("Access Denied: " + error.message);
    }
  };

  window.signOutUser = () => signOut(auth);

  onAuthStateChanged(auth, (user) => {
    if (user) {
      currentUser = user;
      document.getElementById('userAvatar').src = user.photoURL || 'https://api.dicebear.com/7.x/avataaars/svg?seed=Rooh';
      
      // Animation Entry
      authGate.classList.add('opacity-0', 'pointer-events-none');
      setTimeout(() => {
        authGate.style.display = 'none';
        universe.classList.remove('hidden');
        setTimeout(() => universe.classList.remove('opacity-0'), 100);
      }, 1000);
      
      initUniverse();
    } else {
      authGate.style.display = 'flex';
      authGate.classList.remove('opacity-0', 'pointer-events-none');
      universe.classList.add('hidden', 'opacity-0');
    }
  });

  // --- UNIVERSE ENGINE ---
  function initUniverse() {
    renderBooks();
    renderVisions();
    renderCinema();
    renderSymphony();
    lucide.createIcons();
  }

  // 1. RENDER CHRONICLES
  function renderBooks() {
    const grid = document.getElementById('bookGrid');
    grid.innerHTML = db.books.map(book => `
      <div onclick="openVoid('${book.link}', 'pdf', '${book.title}')" 
           class="group relative aspect-[2/3] rounded-lg overflow-hidden cursor-pointer shadow-lg hover:shadow-purple-500/20 transition-all duration-500 transform hover:-translate-y-2">
        <img src="${book.cover}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0">
        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent opacity-90"></div>
        <div class="absolute bottom-0 left-0 p-4 w-full">
          <p class="text-[10px] text-purple-400 uppercase tracking-widest mb-1">Classic</p>
          <h4 class="text-white font-serif font-bold text-lg leading-tight group-hover:text-purple-200 transition-colors">${book.title}</h4>
          <p class="text-xs text-gray-400 mt-1">${book.author}</p>
        </div>
        <div class="absolute top-2 right-2 bg-white/10 backdrop-blur px-2 py-1 rounded text-[9px] uppercase border border-white/10">
          Readable
        </div>
      </div>
    `).join('');
  }

  // 2. RENDER VISIONS (Infinite)
  function renderVisions() {
    const grid = document.getElementById('visionGrid');
    const content = db.visuals.map(id => {
      const url = `https://images.unsplash.com/${id}?auto=format&fit=crop&q=80&w=800`;
      return `
        <div onclick="openVoid('${url}', 'image', 'Visual Artifact')" class="mb-4 break-inside-avoid rounded-xl overflow-hidden cursor-pointer group relative">
          <img src="${url}" loading="lazy" class="w-full object-cover transition-opacity duration-500 hover:opacity-80">
          <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
             <i data-lucide="scan-eye" class="text-white w-8 h-8"></i>
          </div>
        </div>
      `;
    }).join('');
    grid.innerHTML += content;
    // Note: In a real unlimited app, loadMoreVisions would fetch from API
  }

  // 3. RENDER CINEMA (Reels)
  function renderCinema() {
    const container = document.getElementById('reelContainer');
    // Duplicating for "Infinite" scroll feel
    const allVideos = [...db.videos, ...db.videos, ...db.videos];
    
    container.innerHTML = allVideos.map((vid, index) => {
      let src = '';
      if(vid.type === 'drive') src = `https://drive.google.com/file/d/${vid.id}/preview`;
      if(vid.type === 'youtube') src = `https://www.youtube.com/embed/${vid.id}?autoplay=1&controls=0&modestbranding=1&loop=1&playlist=${vid.id}&iv_load_policy=3&showinfo=0&rel=0`;
      
      return `
        <div class="snap-child bg-black flex items-center justify-center overflow-hidden">
          <div class="absolute inset-0 z-10 bg-gradient-to-b from-black/50 via-transparent to-black/50 pointer-events-none"></div>
          <iframe src="${src}" class="w-full h-full md:w-[60vh] md:h-full object-cover pointer-events-auto" frameborder="0" allow="autoplay; encrypted-media"></iframe>
          
          <div class="absolute bottom-24 left-6 z-20 pointer-events-none">
            <h3 class="text-2xl font-bold font-serif text-white shadow-black drop-shadow-lg">Cinematic Moment #${index + 1}</h3>
            <p class="text-sm text-gray-300">Premium Visual Archive</p>
          </div>
          
          <div class="absolute right-4 bottom-32 z-20 flex flex-col gap-6 pointer-events-auto">
             <button class="w-12 h-12 bg-white/10 backdrop-blur rounded-full flex items-center justify-center hover:bg-white/20"><i data-lucide="heart" class="w-6 h-6"></i></button>
             <button class="w-12 h-12 bg-white/10 backdrop-blur rounded-full flex items-center justify-center hover:bg-white/20"><i data-lucide="share-2" class="w-6 h-6"></i></button>
          </div>
        </div>
      `;
    }).join('');
  }

  // 4. RENDER SYMPHONY
  function renderSymphony() {
    const grid = document.getElementById('musicGrid');
    grid.innerHTML = db.music.map((track, i) => `
      <div class="glass-panel p-4 rounded-xl flex items-center gap-4 hover:bg-white/5 transition-colors group cursor-pointer" onclick="openVoid('https://www.youtube.com/embed/${track.id}?autoplay=1', 'audio', '${track.title}')">
        <div class="w-12 h-12 bg-white/10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
          <i data-lucide="play" class="w-5 h-5 fill-white text-white ml-1"></i>
        </div>
        <div class="flex-1">
          <h4 class="font-serif font-bold text-lg">${track.title}</h4>
          <p class="text-xs uppercase tracking-widest text-gray-400">${track.artist}</p>
        </div>
        <div class="text-xs text-gray-500 font-mono">0${i + 1} // 06</div>
      </div>
    `).join('');
  }

  // --- NAVIGATION LOGIC ---
  window.warpTo = (targetId) => {
    // UI Update
    document.querySelectorAll('.view-section').forEach(el => {
      el.classList.add('hidden');
      el.classList.remove('animate-fade-in');
    });
    
    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.classList.remove('text-purple-400', 'opacity-100');
      btn.classList.add('opacity-50');
      if(btn.dataset.target === targetId) {
        btn.classList.add('text-purple-400', 'opacity-100');
        btn.classList.remove('opacity-50');
      }
    });

    // Title Update
    const titles = {
      'chronicles': 'CHRONICLES',
      'visions': 'GALLERY',
      'cinema': 'THEATRE',
      'symphony': 'SYMPHONY'
    };
    document.getElementById('sectionTitle').innerText = titles[targetId];

    // Show Section
    const target = document.getElementById(targetId);
    target.classList.remove('hidden');
    target.classList.add('animate-fade-in');
  };

  // --- VOID MODAL SYSTEM (The Magic) ---
  window.openVoid = (url, type, title) => {
    const modal = document.getElementById('voidModal');
    const iframe = document.getElementById('voidFrame');
    const img = document.getElementById('voidImage');
    const loader = document.getElementById('voidLoader');
    const caption = document.getElementById('aiCaption');

    // Reset
    iframe.classList.add('hidden');
    img.classList.add('hidden');
    loader.classList.remove('hidden');
    modal.classList.remove('hidden');
    
    // AI Typing Effect
    caption.innerText = "Initializing neural handshake...";
    setTimeout(() => {
        const randomCaption = db.captions[Math.floor(Math.random() * db.captions.length)];
        let i = 0;
        caption.innerText = "";
        const typeWriter = setInterval(() => {
            if (i < randomCaption.length) {
                caption.innerText += randomCaption.charAt(i);
                i++;
            } else {
                clearInterval(typeWriter);
            }
        }, 50);
    }, 1500);

    // Fade In
    setTimeout(() => modal.classList.remove('opacity-0'), 10);

    // Load Content
    if (type === 'image') {
      img.src = url;
      img.onload = () => {
        loader.classList.add('hidden');
        img.classList.remove('hidden');
      };
    } else {
      iframe.src = url;
      iframe.classList.remove('hidden');
      iframe.onload = () => {
        loader.classList.add('hidden');
        iframe.classList.remove('opacity-0');
      };
      // Fallback for immediate load on some iframes
      setTimeout(() => {
        loader.classList.add('hidden');
        iframe.classList.remove('opacity-0');
      }, 2000);
    }
  };

  window.closeVoid = () => {
    const modal = document.getElementById('voidModal');
    modal.classList.add('opacity-0');
    setTimeout(() => {
      modal.classList.add('hidden');
      document.getElementById('voidFrame').src = '';
      document.getElementById('voidImage').src = '';
    }, 300);
  };
  
  // Expose load more for demo
  window.loadMoreVisions = () => renderVisions();

</script>

</body>
</html>

